# 重庆市育才中学 2022 年 联合模拟

|    题目名称    |  数据整理   |    人工智能    |  蚂蚁王国  |  交换礼物   |   闭合子图   |
|:----------:|:-----------:|:--------------:|:----------:|:-----------:|:------------:|
| 输入输出文件名 | data.in/out | mahjong.in/out | ant.in/out | gift.in/out | graph.in/out |
|    时间限制    |   1.0 秒    |     1.0 秒     |   2.0 秒   |   2.0 秒    |    1.0 秒    |
|    空间限制    |   256 MB    |     256 MB     |   256 MB   |   256 MB    |    256 MB    |
|   测试点数目   |     10      |       20       |     15     |     18      |      20      |

- 额外编译指令为 `-std=c++14 -O2 -lm`，不需要为每道题目建立子文件夹。
- 样例文件均在随题面下发的 `down` 目录下，不一定提供规模较大的样例。
- 请一定注意时间的把控以及程序正确性的检查。

你可能需要用到的快速读入与快速输出模板，调用 `read()` 会返回一个读入的 `int` 类型的整数，调用 `write(x)` 可以输出一个 `int` 类型的非负整数：

```cpp
inline int read(){
    int x=0,f=1;
    char ch=getchar();
    while(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}
    while(ch>='0'&&ch<='9'){x=(x<<1)+(x<<3)+(ch^48);ch=getchar();}
    return x*f;
}
int stk[30],tp;
void write(int x){
	do stk[++tp]=x%10,x/=10;while(x);
	while(tp)putchar(stk[tp--]^48);
}
```

## 数据整理（data）

### 题目描述

出题人的数据文件名乱了，请你来整理一下。

数据的**文件名**一定能写成 **题目英文名 + 数据编号 + ".in"** 的形式，并且不能超过 100 个字符。其中题目英文名只能有**小写字母**，并且对于每个文件题目名称**相同**，数据编号是**非负整数**。出题人希望你能帮他把这些数据文件按照 **数据编号** 进行排序。

### 输入格式

第一行一个整数 $n$ 表示数据的组数。接下来 $n$ 行，每行代表一个数据的文件名。

数据的**文件名**一定能写成 **题目英文名 + 数据编号 + ".in"** 的形式，并且不能超过 $100$ 个字符。

保证这 $n$ 个文件名**互不相同**。

### 输出格式

输出 $n$ 行，第 $i$ 行一个字符串，表示按照数据编号排序，排名第 $i$ 的数据文件。

### 样例输入与输出

见 `down/data` 目录下的样例文件。

### 数据规模与约定

对于 $10\%$ 的数据，$n\le 2$；

对于 $30\%$ 的数据，$n\le 10$；

对于 $60\%$ 的数据，$n\le 100$；

对于 $100\%$ 的数据，$n \le 10^4$。



## 人工智能（mahjong）

### 题目描述

你是一个人工智能，你需要帮助小 A 完成一局麻将游戏。

小 A 十分喜欢立直麻将这种棋牌游戏，而不论是什么麻将，麻将都拥有相似的胡牌规则，小 A 想要作为人工智能的你来回答，对于给定的一幅手牌，其是否符合麻将的一般型（面子手）中的胡牌型。

此外，为了增加难度，小 A 还会考验你给定一幅听牌的手牌，问这幅手牌听什么牌（也就是**多获得一张什么样的牌可以胡牌**）。

关于麻将的规则，小 A 的介绍如下：

- 一幅麻将手牌胡牌时应当恰有 $14$ 张牌（也就是听牌时恰有 $13$ 张牌），本题中的麻将也不例外；
- 本题中，麻将共有三种花色，分别是**万（m）、饼（p）、索（s）**，每种花色**共有 $9$ 种**牌（编号为 $1\sim 9$），每种牌**最多 $4$ 张**，例如一万记为 `1m`、九索记为 `9s`。
- 一幅麻将**胡牌时**应当由 **$4$ 组面子与 $1$ 组雀头组成**，其中雀头是指**两张完全相同的牌**（如：`22s`，`99m`），而面子在本题中一共**有顺子与刻子**两种，介绍如下：
  - 顺子是指**数字大小连续的三张同花色**的牌，例如：`123s`，`789p`，`456m`；但形如 `135m`，`159p`，`891s` 的三张牌则不构成顺子；
  - 刻子是指**三张完全相同的牌**，如：`333m`，`777s`，`444p`；但形如 `445s` 的三张牌则不构成刻子。
- 当听牌在手牌中已经出现 $4$ 张时，由于没有第 $5$ 张牌可以胡，**不认为**这张牌是所听的牌。

### 输入格式

第一行一个正整数 $n$，表示麻将牌的张数。

第二行一个正整数 $T$ 表示手牌组数。

接下来 $T$ 行，每行 $n$ 个用空格分隔的长度为 $2$ 的字符串，表示手牌。

### 输出格式

输出共 $T$ 行，对于每组数据：

- 若 $n=14$ 输出一行一个非负整数，`1` 表示胡牌，`0` 表示没胡。
- 若 $n=13$ 输出一行若干个用空格分隔的长度为 $2$ 的字符串，按照第一关键字为 `mps`，第二关键字为 `123456789` 的顺序将给定手牌的听牌输出（若没听则输出空行）。

### 样例输入与输出

见 `down/mahjong` 目录下的样例文件。

### 数据规模与约定

对于所有数据，$13\leq n\leq 14$，$1\leq T\leq 10$，每个测试点的具体约束如下：

为了方便阅读，我们将测试点编号放在了表格中央。

出现的花色数最少为 $m$，每张牌最多出现 $k$ 次。

- 特殊性质：最多只会有一种牌的张数为两张。

| $n=$ | $m=$ | $k=$ | 测试点编号 | 特殊性质 |
| :--: | :--: | :--: | :--------: | :------: |
|  14  |  3   |  2   |     1      |    有    |
|  14  |  3   |  2   |     2      |    无    |
|  14  |  3   |  3   |     3      |    无    |
|  14  |  3   |  4   |     4      |    无    |
|  14  |  2   |  2   |     5      |    无    |
|  14  |  2   |  3   |     6      |    无    |
|  14  |  2   |  4   |     7      |    无    |
|  14  |  1   |  2   |     8      |    无    |
|  14  |  1   |  3   |     9      |    无    |
|  14  |  1   |  4   |     10     |    无    |
|  14  |  1   |  4   |     11     |    无    |
|  13  |  3   |  2   |     12     |    有    |
|  13  |  3   |  2   |     13     |    无    |
|  13  |  3   |  3   |     14     |    无    |
|  13  |  3   |  4   |     15     |    无    |
|  13  |  2   |  2   |     16     |    无    |
|  13  |  2   |  3   |     17     |    无    |
|  13  |  2   |  4   |     18     |    无    |
|  13  |  1   |  2   |     19     |    无    |
|  13  |  1   |  3   |   20~22    |    无    |
|  13  |  1   |  4   |   23~25    |    无    |



## 蚂蚁王国（ant）

### 题目描述

蚂蚁们要建立一个王国！在一条狭长的土地下，藏着 $n$ 个蚂蚁窝。如果以水平面建立坐标系，第 $i$ 个蚂蚁窝位于 $(x_i,y_i)$。现在它们要打通道路来使得这 $n$ 个蚂蚁窝可以通过道路任意互达。打通第 $i$ 个蚂蚁窝到第 $j$ 个蚂蚁窝的道路需要消耗 $(x_i-x_j)^2+(y_i-y_j)^2$ 单位的资源。

为了以后的发展，蚂蚁们希望以最小的资源消耗来达成目标，你可以帮帮它们吗？

### 输入格式

第一行一个整数 $n$。

接下来 $n$ 行，第 $i+1$ 行两个整数表示 $x_i,y_i$。

### 输出格式

一行一个整数，表示最小的资源总消耗量。

### 样例输入与输出

见 `down/ant` 目录下的样例文件。

### 数据规模与约定

对于所有数据，$1\leq n\leq 10^5$，$0\leq x_i\leq 10^6$，$0\leq y_i\leq 10$。

共 $15$ 组数据，第一组数据为样例，每个测试点基本等分（存在至多 1 分的差别）。

对于第 $i$ 组数据，$2\leq i\leq 3$，满足 $n\leq 10^3$。





## 交换礼物（gift）

### 题目描述

喵喵喵幼儿园有 $n$ 名同学，现在有 $n$ 个礼物要分配给他们，但是每个同学的喜好不同，具体地，第 $i$ 名同学最喜欢第 $p_{i,1}$ 个礼物，其次喜欢第 $p_{i,2}$ 个礼物……最不喜欢第 $p_{i,n}$ 个礼物，保证 $p_{i}$ 是一个 $1$ 到 $n$ 的排列。

现在懒惰的老师只给第 $i$ 名同学分配了第 $i$ 个礼物，他们自然希望通过交换来得到自己更喜欢的礼物，也就是说，交换结束之后每个人都不会拿到自己更不喜欢的礼物。

现在你需要帮助同学们完成交换礼物的过程，好奇的他们希望知道有多少种方法可以使得交换之后每个人都不会拿到自己更不喜欢的礼物。

正当你开始准备解决这个问题时，老师告诉你，同学们之间被分为了两个阵营，只有同一个阵营的同学之间才能交换礼物；并且这个阵营情况是会发生变化的，你需要对于 $q$ 种阵营情况分别求出只在同阵营的同学之间交换礼物，且交换之后合法的方案数，由于答案可能很大，所以你不需要取模再输出。

### 输入格式

第一行一个整数 $n$。

接下来 $n$ 行，第 $i+1$ 行 $n$ 个整数表示 $p_{i,1\cdots n}$。

接下来一行一个整数 $q$。

接下来 $q$ 行，每行一个长度为 $n$ 的字符串，若第 $i$ 个字符为 `H`，则第 $i$ 名同学属于第一个阵营，否则属于第二个阵营。

### 输出格式

共 $q$ 行，每行一个整数表示答案。

### 样例输入与输出

见 `down/gift` 目录下的样例文件。

### 数据规模与约定

对于所有数据，$1\leq n\leq 18$，$1\leq q\leq \min\{10^5,2^n\}$，保证 $p_i$ 是一个 $1$ 到 $n$ 的排列。

共 $18$ 组数据，第一组数据为样例，每个测试点基本等分（存在至多 1 分的差别）。

对于第 $i$ 组数据，$2\leq i\leq 13$，满足 $n=i+4$；

对于第 $i$ 组数据，$14\leq i\leq 18$，满足 $n=18$。

































## 闭合子图（graph）

### 题目描述

给定有向图 $G = (V,E)$，其中 $V$ 为点集，$E$ 为边集。设 $G$ 包含 $n$ 个结点，用正整数 $1,2,··· ,n$ 表示，即 $V = \{1,2,··· ,n\}$。

对于 $V$ 的任意非空子集 $S\subseteq V$，如果 $S$ 中任意点的任意后继均属于 $S$，即对任意 $u \in S$ 及 $u$ 的出边 $(u,v) \in E$ 均满足 $v \in S$，则称 $S$ 是 $G$ 的一个**闭合子图**。

你的任务是，求出有多少个 $G$ 的**非空**闭合子图 $S$，满足 $S$ 中的点编号是**连续**的。连续的定义：对任意整数 $i < k < j$，若 $i, j \in S$，则 $k \in S$。

### 输入格式

第一行两个整数 $n,m$，表示图 $G$ 的结点数和边数。

接下来 $m$ 行，每行两个正整数 $u_i$ ,$v_i$ ，表示有一条从点 $u_i$ 到点 $v_i$ 的边 $(u_i ,v_i ) \in E$。

图 $G$ 可能包含重边和自环。

### 输出格式

输出共一行，包含一个整数，表示所求的闭合子图的个数。

**由于答案可能很大**，**所以这里要求输出答案对** $10^9+7$ **取模的结果**。

### 样例输入与输出

见 `down/graph` 目录下的样例文件。

### 数据规模与约定

![](https://fzyzoi.tk:500/OnlineJudge/Upload/images/3219_Constant.png)
